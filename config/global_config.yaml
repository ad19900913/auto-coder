# è‡ªåŠ¨åŒ–AIä»»åŠ¡æ‰§è¡Œç³»ç»Ÿ - å…¨å±€é…ç½®æ–‡ä»¶
# ç‰ˆæœ¬: 1.0
# æ›´æ–°æ—¶é—´: 2025-01-20

# ç³»ç»ŸåŸºæœ¬ä¿¡æ¯
name: "è‡ªåŠ¨åŒ–AIä»»åŠ¡æ‰§è¡Œç³»ç»Ÿ"
version: "1.0.0"
max_concurrent_tasks: 5

# AIæœåŠ¡é…ç½®
ai_services:
  default: "${DEFAULT_AI_SERVICE}"  # é»˜è®¤AIæœåŠ¡
  claude:
    api_key: "${CLAUDE_API_KEY}"
    base_url: "https://api.anthropic.com"
    model: "claude-3-sonnet-20240229"
    max_tokens: 4000
    temperature: 0.1
    
    # é«˜çº§å‚æ•°
    parameters:
      temperature: 0.1
      max_tokens: 4000
      top_p: 0.9
      frequency_penalty: 0.0
      presence_penalty: 0.0
      stop_sequences: []
    
    # ä»»åŠ¡ç±»å‹ç‰¹å®šå‚æ•°
    task_parameters:
      coding:
        temperature: 0.05
        max_tokens: 6000
      review:
        temperature: 0.1
        max_tokens: 3000
      requirement_review:
        temperature: 0.15
        max_tokens: 5000
  
  deepseek:
    api_key: "${DEEPSEEK_API_KEY}"
    base_url: "https://api.deepseek.com"
    model: "deepseek-reasoner"
    max_tokens: 4000
    temperature: 0.1
    
    # é«˜çº§å‚æ•°
    parameters:
      temperature: 0.1
      max_tokens: 4000
      top_p: 0.9
      repetition_penalty: 1.0
      top_k: 40
    
    # ä»»åŠ¡ç±»å‹ç‰¹å®šå‚æ•°
    task_parameters:
      coding:
        temperature: 0.05
        max_tokens: 6000
      review:
        temperature: 0.1
        max_tokens: 3000
      requirement_review:
        temperature: 0.15
        max_tokens: 5000
  
  gemini:
    api_key: "${GEMINI_API_KEY}"
    base_url: "https://generativelanguage.googleapis.com"
    model: "gemini-2.5-pro"
    max_tokens: 4000
    temperature: 0.1
    
    # é«˜çº§å‚æ•°
    parameters:
      temperature: 0.1
      max_tokens: 4000
      top_p: 0.8
      top_k: 40
      candidate_count: 1
    
    # ä»»åŠ¡ç±»å‹ç‰¹å®šå‚æ•°
    task_parameters:
      coding:
        temperature: 0.05
        max_tokens: 6000
      review:
        temperature: 0.1
        max_tokens: 3000
      requirement_review:
        temperature: 0.15
        max_tokens: 5000
  
  cursor:
    api_key: "${CURSOR_API_KEY}"
    base_url: "https://api.cursor.sh"
    model: "cursor-1"
    max_tokens: 4000
    temperature: 0.1
    
    # é«˜çº§å‚æ•°
    parameters:
      temperature: 0.1
      max_tokens: 4000
      top_p: 0.9
      frequency_penalty: 0.0
      presence_penalty: 0.0
    
    # ä»»åŠ¡ç±»å‹ç‰¹å®šå‚æ•°
    task_parameters:
      coding:
        temperature: 0.05
        max_tokens: 6000
      review:
        temperature: 0.1
        max_tokens: 3000
      requirement_review:
        temperature: 0.15
        max_tokens: 5000

# Gité…ç½®
git:
  default: "${DEFAULT_GIT_SERVICE}"  # é»˜è®¤Gitå¹³å°
  github:
    token: "${GITHUB_TOKEN}"
    username: "${GITHUB_USERNAME}"
  gitlab:
    token: "${GITLAB_TOKEN}"
    base_url: "${GITLAB_BASE_URL}"
    username: "${GITLAB_USERNAME}"  # æ·»åŠ ç”¨æˆ·åé…ç½®

# ç¼–ç è§„èŒƒé…ç½®ï¼ˆæŒ‰è¯­è¨€åˆ†ç±»ï¼‰
coding_standards:
  java:
    file_path: "./standards/java_coding_standards.md"
    enabled: true
    description: "Javaç¼–ç è§„èŒƒ"
    version: "1.0"
    last_updated: "2025-01-20"
  
  python:
    file_path: "./standards/python_coding_standards.md"
    enabled: true
    description: "Pythonç¼–ç è§„èŒƒ"
    version: "1.0"
    last_updated: "2025-01-20"
  
  frontend:
    file_path: "./standards/frontend_coding_standards.md"
    enabled: true
    description: "å‰ç«¯ç¼–ç è§„èŒƒ"
    version: "1.0"
    last_updated: "2025-01-20"
  
  general:
    file_path: "./standards/general_coding_standards.md"
    enabled: true
    description: "é€šç”¨ç¼–ç è§„èŒƒ"
    version: "1.0"
    last_updated: "2025-01-20"
  
  redlines:
    file_path: "./standards/redline_standards.md"
    enabled: true
    description: "ç¼–ç çº¢çº¿è§„èŒƒ"
    version: "1.0"
    last_updated: "2025-01-20"

# ä»»åŠ¡è¶…æ—¶æ—¶é—´é…ç½®
task_timeouts:
  coding: 1800      # 30åˆ†é’Ÿ
  review: 900       # 15åˆ†é’Ÿ
  doc: 600          # 10åˆ†é’Ÿ
  requirement_review: 1200  # 20åˆ†é’Ÿ
  custom: 1800      # 30åˆ†é’Ÿ
  
  global:
    default: 600    # é»˜è®¤è¶…æ—¶æ—¶é—´
    max: 7200       # æœ€å¤§è¶…æ—¶æ—¶é—´ï¼ˆ2å°æ—¶ï¼‰
    warning_threshold: 0.8  # è¶…æ—¶è­¦å‘Šé˜ˆå€¼

# é‡è¯•é…ç½®
retry_config:
  max_attempts: 3
  base_delay: 60
  max_delay: 3600
  backoff_multiplier: 2
  jitter: 0.1
  
  task_specific:
    coding:
      max_attempts: 5
      base_delay: 120
    git_operations:
      max_attempts: 3
      base_delay: 30

# çŠ¶æ€æ–‡ä»¶ç®¡ç†é…ç½®
state_management:
  cleanup_enabled: true
  retention_days: 90
  archive_enabled: true
  archive_path: "./archives/states"
  cleanup_schedule: "0 2 * * *"  # æ¯å¤©å‡Œæ™¨2ç‚¹æ¸…ç†
  
  cleanup_strategy:
    completed_tasks: "archive"
    failed_tasks: "archive"
    running_tasks: "skip"
    expired_tasks: "delete"
  
  archive:
    compression: true
    compression_format: "zip"
    max_archive_size: "100MB"
    archive_retention_days: 365
  
  state_file:
    max_size: "10MB"
    backup_enabled: true
    backup_count: 3
    backup_interval: "1h"

# é€šçŸ¥æ¨¡æ¿é…ç½®
notification_templates:
  variables:
    task_name: "{task_name}"
    task_type: "{task_type}"
    task_id: "{task_id}"
    duration: "{duration}"
    error_message: "{error_message}"
    files_count: "{files_count}"
    issues_count: "{issues_count}"
    inconsistencies_count: "{inconsistencies_count}"
  
  common:
    task_start: "ğŸš€ ä»»åŠ¡ {task_name} ({task_type}) å¼€å§‹æ‰§è¡Œ"
    task_complete: "âœ… ä»»åŠ¡ {task_name} æ‰§è¡Œå®Œæˆï¼Œè€—æ—¶ {duration}"
    task_error: "âŒ ä»»åŠ¡ {task_name} æ‰§è¡Œå¤±è´¥: {error_message}"
  
  task_specific:
    coding:
      start: "ğŸ”§ ç¼–ç ä»»åŠ¡ {task_name} å¼€å§‹æ‰§è¡Œ"
      complete: "âœ… ç¼–ç ä»»åŠ¡ {task_name} å®Œæˆï¼Œç”Ÿæˆäº† {files_count} ä¸ªæ–‡ä»¶"
      error: "âŒ ç¼–ç ä»»åŠ¡ {task_name} å¤±è´¥: {error_message}"
      review_required: "ğŸ” ç¼–ç ä»»åŠ¡ {task_name} å®Œæˆï¼Œç­‰å¾…ä»£ç å®¡æŸ¥"
    
    review:
      start: "ğŸ” ä»£ç å®¡æŸ¥ä»»åŠ¡ {task_name} å¼€å§‹æ‰§è¡Œ"
      complete: "âœ… ä»£ç å®¡æŸ¥å®Œæˆï¼Œå‘ç° {issues_count} ä¸ªé—®é¢˜"
      error: "âŒ ä»£ç å®¡æŸ¥å¤±è´¥: {error_message}"
      issues_found: "âš ï¸ ä»£ç å®¡æŸ¥å‘ç° {issues_count} ä¸ªé—®é¢˜ï¼Œéœ€è¦é‡æ–°ç¼–ç "
      no_issues: "âœ… ä»£ç å®¡æŸ¥é€šè¿‡ï¼Œä»»åŠ¡å®Œæˆ"
    
    doc:
      start: "ğŸ“š æ–‡æ¡£ç”Ÿæˆä»»åŠ¡ {task_name} å¼€å§‹æ‰§è¡Œ"
      complete: "âœ… æ–‡æ¡£ç”Ÿæˆå®Œæˆï¼Œè¾“å‡ºåˆ° {output_path}"
      error: "âŒ æ–‡æ¡£ç”Ÿæˆå¤±è´¥: {error_message}"
    
    requirement_review:
      start: "ğŸ“‹ éœ€æ±‚è¯„å®¡ä»»åŠ¡ {task_name} å¼€å§‹æ‰§è¡Œ"
      complete: "âœ… éœ€æ±‚è¯„å®¡å®Œæˆï¼Œå‘ç° {inconsistencies_count} ä¸ªä¸ä¸€è‡´ç‚¹"
      error: "âŒ éœ€æ±‚è¯„å®¡å¤±è´¥: {error_message}"
      critical_issues: "ğŸš¨ éœ€æ±‚è¯„å®¡å‘ç°å…³é”®é—®é¢˜ï¼Œè¯·åŠæ—¶å¤„ç†"
    
    custom:
      start: "âš™ï¸ è‡ªå®šä¹‰ä»»åŠ¡ {task_name} å¼€å§‹æ‰§è¡Œ"
      complete: "âœ… è‡ªå®šä¹‰ä»»åŠ¡ {task_name} æ‰§è¡Œå®Œæˆ"
      error: "âŒ è‡ªå®šä¹‰ä»»åŠ¡ {task_name} æ‰§è¡Œå¤±è´¥: {error_message}"
  
  notification_levels:
    info: ["task_start", "task_complete"]
    warning: ["review_required", "issues_found"]
    error: ["task_error", "critical_issues"]
  
  channels:
    dingtalk:
      enabled: false
      webhook_url: "${DINGTALK_WEBHOOK}"
      secret: "${DINGTALK_SECRET}"
      at_users: ["å¼ ä¸‰", "æå››"]
      at_all: false
    
    email:
      enabled: true
      smtp_server: "${EMAIL_SMTP_SERVER}"
      smtp_port: 587
      username: "${EMAIL_USERNAME}"
      password: "${EMAIL_PASSWORD}"
      from_email: "${EMAIL_FROM_EMAIL}"
      to_emails: ["${EMAIL_TO_EMAILS}"]
      use_tls: true
      use_ssl: false
    
    webhook:
      enabled: false
      url: ""
      headers: {}

# é€šçŸ¥é…ç½®
notification:
  dingtalk:
    webhook_url: "${DINGTALK_WEBHOOK}"
    secret: "${DINGTALK_SECRET}"
    at_users: ["å¼ ä¸‰", "æå››"]
  
  email:
    smtp_server: "${EMAIL_SMTP_SERVER}"
    smtp_port: 587
    username: "${EMAIL_USERNAME}"
    password: "${EMAIL_PASSWORD}"
    from_email: "${EMAIL_FROM_EMAIL}"
    to_emails: ["${EMAIL_TO_EMAILS}"]
    use_tls: true
    use_ssl: false

# æ—¥å¿—é…ç½®
logging:
  level: "INFO"
  retention_days: 30
  max_file_size: "10MB"

# ç³»ç»Ÿé…ç½®
system:
  work_dir: "./states"
  output_dir: "./outputs"
  max_concurrent_tasks: 5
  default_timeout: 300

# æ™ºèƒ½ä»»åŠ¡ç”Ÿæˆé…ç½®
intelligent_task_generation:
  enabled: true
  
  # ä¼˜åŒ–è§„åˆ™
  optimization_rules:
    coding:
      max_tokens_multiplier: 1.5
      temperature_adjustment: 0.8
      timeout_multiplier: 1.3
      retry_attempts_increase: 1
    
    review:
      max_tokens_multiplier: 1.2
      temperature_adjustment: 0.9
      timeout_multiplier: 1.1
      retry_attempts_increase: 0
    
    doc:
      max_tokens_multiplier: 1.8
      temperature_adjustment: 0.7
      timeout_multiplier: 1.5
      retry_attempts_increase: 1
    
    requirement_review:
      max_tokens_multiplier: 1.6
      temperature_adjustment: 0.8
      timeout_multiplier: 1.4
      retry_attempts_increase: 1
    
    custom:
      max_tokens_multiplier: 1.3
      temperature_adjustment: 0.9
      timeout_multiplier: 1.2
      retry_attempts_increase: 0
  
  # æ¨¡æ¿ç®¡ç†
  template_management:
    auto_learn: true
    template_retention_days: 365
    min_usage_count: 3
    success_rate_threshold: 0.7
  
  # é¢„æµ‹é…ç½®
  prediction:
    use_historical_data: true
    confidence_threshold: 0.6
    max_prediction_history: 1000
    prediction_accuracy_tracking: true

# AIæ¨¡å‹ç®¡ç†é…ç½®
ai_model_management:
  enabled: true
  
  # æ•°æ®åº“é…ç½®
  database_path: "./data/ai_models.db"
  models_directory: "./models"
  
  # æ€§èƒ½ç›‘æ§é…ç½®
  performance_history_size: 1000
  performance_window_hours: 24
  
  # è‡ªåŠ¨åˆ‡æ¢é…ç½®
  auto_switch_enabled: true
  auto_switch_threshold: 0.8
  
  # æ¨¡å‹ç±»å‹é…ç½®
  supported_model_types:
    - "text_generation"
    - "code_generation"
    - "text_analysis"
    - "multimodal"
    - "embedding"
  
  # é»˜è®¤æ¨¡å‹é…ç½®
  default_models:
    text_generation:
      model_name: "claude-3-sonnet"
      version: "20240229"
      provider: "anthropic"
      parameters:
        max_tokens: 4000
        temperature: 0.7
    
    code_generation:
      model_name: "claude-3-sonnet"
      version: "20240229"
      provider: "anthropic"
      parameters:
        max_tokens: 6000
        temperature: 0.3
    
    text_analysis:
      model_name: "claude-3-haiku"
      version: "20240307"
      provider: "anthropic"
      parameters:
        max_tokens: 2000
        temperature: 0.5

# å¤šæ¨¡æ€AIæ”¯æŒé…ç½®
multimodal_ai:
  enabled: true
  
  # æ”¯æŒçš„åª’ä½“ç±»å‹
  supported_media_types:
    - "image"
    - "pdf"
    - "word"
    - "text"
  
  # è¾“å‡ºç›®å½•
  output_directory: "./outputs/multimodal"
  
  # å›¾åƒå¤„ç†é…ç½®
  image_processing:
    max_image_size: 10  # MB
    supported_formats:
      - "jpg"
      - "jpeg"
      - "png"
      - "gif"
      - "bmp"
      - "tiff"
      - "webp"
    enhancement_options:
      brightness_factor: 1.2
      contrast_factor: 1.5
      sharpness_factor: 2.0
  
  # æ–‡æ¡£å¤„ç†é…ç½®
  document_processing:
    max_file_size: 50  # MB
    supported_formats:
      pdf: [".pdf"]
      word: [".docx", ".doc"]
      text: [".txt", ".md", ".json", ".xml", ".csv"]
    extraction_options:
      extract_tables: true
      extract_images: false
      preserve_formatting: true
  
  # AIåˆ†æé…ç½®
  ai_analysis:
    default_prompt: "è¯·åˆ†æè¿™ä¸ªåª’ä½“æ–‡ä»¶çš„å†…å®¹å’Œç‰¹å¾"
    max_tokens: 1000
    temperature: 0.3
    use_ai_for_all_types: true
  
  # æ€§èƒ½é…ç½®
  performance:
    max_concurrent_processes: 3
    timeout_per_file: 300  # ç§’
    memory_limit: "2GB"

# æœºå™¨å­¦ä¹ é›†æˆé…ç½®
machine_learning:
  enabled: true
  
  # æ•°æ®åº“é…ç½®
  database_path: "./data/ml_service.db"
  models_directory: "./models"
  
  # é¢„æµ‹æ¨¡å‹é…ç½®
  prediction:
    min_training_samples: 10
    model_type: "random_forest"
    n_estimators: 100
    random_state: 42
    confidence_threshold: 0.7
    prediction_window_days: 90
  
  # å¼‚å¸¸æ£€æµ‹é…ç½®
  anomaly_detection:
    enabled: true
    detection_method: "statistical"
    duration_threshold: 2.0  # æ ‡å‡†å·®å€æ•°
    error_threshold: 2.0
    retry_threshold: 3
    min_samples_for_detection: 10
  
  # æ™ºèƒ½è°ƒåº¦é…ç½®
  scheduling:
    enabled: true
    optimization_algorithm: "genetic"
    population_size: 50
    generations: 100
    mutation_rate: 0.1
    crossover_rate: 0.8
  
  # A/Bæµ‹è¯•é…ç½®
  ab_testing:
    enabled: true
    min_sample_size: 100
    confidence_level: 0.95
    max_test_duration_days: 30
    traffic_allocation_method: "hash_based"
    result_storage_days: 90
  
  # æ¨¡å‹ç®¡ç†é…ç½®
  model_management:
    auto_save_interval_hours: 24
    model_versioning: true
    backup_models: true
    model_validation: true
  
  # æ•°æ®ç®¡ç†é…ç½®
  data_management:
    cleanup_interval_days: 7
    retention_days: 90
    max_database_size_mb: 1000
    compression_enabled: true
  
  # æ€§èƒ½é…ç½®
  performance:
    max_concurrent_predictions: 10
    batch_size: 100
    cache_size: 1000
    timeout_seconds: 300
