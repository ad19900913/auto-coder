# AI提示词模板系统

## 概述

本目录包含了自动化AI任务执行系统的完整AI提示词模板，为五种不同的任务类型提供了结构化的AI交互模板。每种任务类型都有对应的提示词模板，确保AI能够按照工作流程规范执行相应的步骤。

## 目录结构

### 基础提示词模板 (base/)
- 所有任务类型的通用提示词模板
- 提供基础的AI交互框架
- 定义标准的输入输出格式

### 编码任务提示词 (coding/)
- 针对代码生成和实现的专用提示词
- 包含功能分解、代码实现、质量检查等提示词
- 支持多种编程语言和框架

### 代码走查提示词 (review/)
- 针对代码质量审查的专用提示词
- 包含代码分析、架构审查、安全检查等提示词
- 支持多维度的代码评审

### 文档生成提示词 (doc/)
- 针对文档自动生成的专用提示词
- 包含结构规划、内容生成、图表制作等提示词
- 支持多种文档类型和格式

### 需求评审提示词 (requirement_review/)
- 针对需求与实现一致性分析的专用提示词
- 包含需求分析、代码分析、一致性检查等提示词
- 支持多维度的对比评审

### 自定义任务提示词 (custom/)
- 针对灵活自定义任务的专用提示词
- 包含目标分析、策略制定、内容生成等提示词
- 支持多种分析和输出类型

## 提示词模板规范

### 命名规范
- 模板文件使用 `.md` 格式
- 命名格式：`{task_type}_{step_name}_prompt.md`
- 例如：`coding_init_prompt.md`, `review_analysis_prompt.md`

### 内容结构
每个提示词模板包含以下部分：
1. **角色定义** - 明确AI的角色和职责
2. **任务描述** - 详细说明具体任务要求
3. **输入格式** - 定义输入数据的格式和结构
4. **输出要求** - 明确输出的格式、内容和质量标准
5. **示例参考** - 提供典型的输入输出示例
6. **注意事项** - 特殊要求和限制条件

### 变量占位符
提示词模板中使用以下变量占位符：
- `{task_id}` - 任务ID
- `{task_description}` - 任务描述
- `{project_path}` - 项目路径
- `{selected_features}` - 选择的功能点
- `{code_paths}` - 代码路径
- `{requirement_documents}` - 需求文档
- `{input_sources}` - 输入数据源
- `{output_formats}` - 输出格式
- `{timestamp}` - 时间戳

## 使用方式

### 1. 模板加载
工作流引擎根据步骤配置自动加载对应的提示词模板：
```yaml
config:
  prompt_template: "coding_init_prompt"
```

### 2. 变量替换
系统自动将占位符替换为实际值：
```python
prompt_content = template.replace("{task_id}", actual_task_id)
```

### 3. AI调用
处理后的提示词发送给AI服务：
```python
response = ai_service.call(prompt_content, **ai_params)
```

## 模板定制

### 新增模板
1. 在对应任务类型目录下创建新的 `.md` 文件
2. 按照标准结构编写提示词内容
3. 在工作流配置中引用新模板

### 修改模板
1. 直接编辑对应的 `.md` 文件
2. 保持变量占位符的一致性
3. 测试修改后的效果

### 版本管理
- 提示词模板纳入版本控制
- 重要修改需要记录变更日志
- 定期评估和优化模板效果

## 质量标准

### 准确性
- 角色定义明确准确
- 任务描述详细具体
- 输出要求清晰可执行

### 一致性
- 同类型任务的提示词风格一致
- 变量占位符使用规范
- 输出格式标准化

### 完整性
- 覆盖工作流的所有关键步骤
- 包含必要的示例和说明
- 考虑各种边界情况

### 可维护性
- 结构清晰易于理解
- 模块化设计便于复用
- 变更影响范围可控

## 注意事项

### 1. 敏感信息保护
- 提示词模板中不得包含敏感信息
- 使用变量占位符代替具体数值
- 避免暴露系统内部实现细节

### 2. 性能考虑
- 控制提示词长度在合理范围内
- 避免过于复杂的嵌套结构
- 优化AI调用的Token使用

### 3. 兼容性
- 确保提示词与不同AI模型兼容
- 考虑模型能力的差异
- 提供降级方案

### 4. 更新维护
- 定期检查和更新提示词内容
- 根据实际使用效果进行优化
- 保持与工作流程的同步

## 扩展指南

### 添加新任务类型
1. 创建新的任务类型目录
2. 编写对应的提示词模板
3. 更新工作流配置
4. 测试和验证效果

### 支持新的AI模型
1. 分析新模型的特点和能力
2. 调整提示词的表达方式
3. 测试兼容性和效果
4. 提供特定的配置选项

### 国际化支持
1. 创建多语言版本的提示词模板
2. 建立语言代码映射关系
3. 实现动态语言切换
4. 保持各语言版本的一致性

## 最佳实践

### 1. 提示词设计
- 使用清晰简洁的语言
- 提供具体的行为指导
- 设置合理的期望目标
- 包含必要的上下文信息

### 2. 测试验证
- 使用真实场景测试提示词效果
- 验证输出结果的质量和准确性
- 收集用户反馈进行改进
- 建立持续优化机制

### 3. 文档维护
- 保持提示词文档的更新
- 记录重要的设计决策
- 提供使用指南和示例
- 建立问题反馈渠道

### 4. 质量控制
- 定期审查提示词内容
- 监控AI输出的质量指标
- 识别和解决常见问题
- 持续优化和改进

## 问题排查

### 常见问题
1. **AI输出格式不符合要求** - 检查输出格式定义是否清晰
2. **AI理解任务有误** - 检查任务描述是否准确完整
3. **输出质量不稳定** - 检查提示词是否过于开放
4. **变量替换失败** - 检查占位符格式是否正确

### 调试技巧
1. 逐步测试提示词的各个部分
2. 使用简化的输入验证基本功能
3. 检查AI模型的输出日志
4. 对比不同提示词版本的效果差异

## 版本历史

### v1.0（当前版本）
- 完成五种任务类型的基础提示词模板
- 建立标准的模板结构和规范
- 实现变量占位符机制
- 提供完整的使用指南

### 后续计划
- 根据实际使用效果优化提示词内容
- 增加更多任务类型的支持
- 实现动态提示词生成功能
- 支持多语言和国际化
