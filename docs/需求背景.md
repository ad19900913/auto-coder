## 原始需求背景
我想实现以下功能
0. 使用一种脚本语言，在windows环境下，实现自动调用AI的接口，完成以下几点功能
1. 让AI在指定的时间点，执行我指定的任务清单，任务类型分为编码任务、文档任务、走查类任务
2. 如果是编码任务，可以指定在那个项目的那个分支上进行开发，开发完成后，自动生成commit信息，并提交到git仓库。
3. 如果是走查类任务，需要参考我们公司的编码规范、红线规范，对指定项目的指定分支下的代码，指定时间之后的提交记录进行审查，把审查意见输出到文档中
4. 如果是文档类任务，就按照我的要求，输出文档

## 补充需求背景-1
1. 任务调度和时间管理
时间点指定方式：您希望如何指定执行时间？是固定的时间点（如每天9点），还是可以设置多个时间点？
    - 使用crontab表达式，需要支持多个表达式
任务频率：任务是一次性执行，还是需要定期重复执行？
    - 根据表达式来决定
时区处理：是否需要考虑时区问题？
    - 不考虑，使用0时区
2. 编码任务的具体要求
项目识别：如何识别和定位指定的项目？是通过项目路径、项目名称，还是其他标识？
    - 通过配置文件指定，就是说会有一个整体的配置文件指定需要执行的任务，是一次性，还是周期性。
分支管理：如果指定的分支不存在，是否需要自动创建？开发完成后是否需要合并到主分支？
    - 可以自动创建分支，不要自动合并到主分支，需要人工审查后，由人工合并
代码生成：AI生成的代码是否需要人工审核后再提交，还是可以直接自动提交？
    - 我建议是使用两个角色，一个是编码者，一个是走查者。编码者改完代码后，走查者根据git对比出的差异，进行走查，输出走查意见
3. 走查类任务的审查范围
时间范围：您提到"指定时间之后的提交记录"，这个时间是指某个具体的日期时间点吗？
    - 是的，例如可以指定审查V3.17.8分支上，2025-08-01之后提交的代码，因为V3.17.8是2025-08-01之后才开工的
审查深度：是只审查代码风格和规范，还是需要深入分析代码质量和潜在问题？
    - 深入分析代码质量和潜在问题，以及设计上不合理的地方
输出格式：审查意见的输出文档格式有特殊要求吗？（如Markdown、Word、Excel等）
    - 使用Markdown吧
4. 文档类任务
文档类型：主要生成什么类型的文档？（如技术文档、API文档、用户手册等）
    - 主要是Markdown
输出格式：文档的输出格式和存储位置有要求吗？
    - 可以由配置文件指定格式和位置
5. 技术实现相关
AI接口：您计划使用哪个AI服务？（如OpenAI、Claude、本地部署的模型等）
    - 我不清楚有哪些模型提供了API服务的，OpenAI、Claude、Deepseek？你还知道哪些？
Git操作：是否需要支持多种Git托管平台？（如GitHub、GitLab、Gitee等）
    - 支持这两个GitHub、GitLab
错误处理：当任务执行失败时，需要什么样的错误处理和通知机制？
    - 使用钉钉机器人通知
6. 系统集成
配置管理：任务配置、AI接口配置等如何管理？是否需要配置文件或数据库？
    - 使用配置文件管理就好
日志记录：是否需要详细的执行日志和审计记录？
    - 记录简单的日志吧
监控告警：是否需要任务执行状态的监控和异常告警？
    - 使用钉钉机器人通知

## 补充需求背景-2
1. 任务执行流程的细节
您提到"编码者改完代码后，走查者根据git对比出的差异，进行走查"，这里有几个问题：
走查时机：走查是在编码任务完成后立即执行，还是需要单独配置走查任务？
    - 可以通过一个状态文件来交互，一开始任务是编码状态，编码任务完成后更新为走查状态，走查者扫描到状态更新，就启动走查。走查完成后，把走查意见写到文件中，并且把状态再次更新成编码状态，编码者扫描到以后再次启动编码，结合走查意见就行修改。当某一次走查者走查完发现没有问题时，结束整个编码任务
走查范围：走查是针对编码任务产生的所有代码变更，还是可以指定特定的文件或目录？
    - 所有改动
走查结果处理：走查完成后，如果发现问题，是否需要自动回滚代码或者通知编码者？
    - 更新任务的状态，就像信号量一样协调编码者和走查者交替执行任务
2. 配置文件结构
任务配置：每个任务是否需要独立的配置项？比如：
任务名称、类型、crontab表达式
项目路径、分支名称
AI模型选择、参数配置
输出路径、通知配置等
配置层级：是否需要支持全局配置和任务级配置？
    - 每个任务需要单独的配置项
    - 支持全局配置和任务级配置
3. AI模型选择和配置
关于AI模型，我了解一些主流选择：
OpenAI GPT系列：功能强大，但需要科学上网
Claude系列：代码能力优秀，支持中文
DeepSeek：国产模型，代码能力不错
通义千问：阿里云模型，国内访问稳定
文心一言：百度模型，国内访问稳定
您希望支持哪些模型？是否需要支持模型切换和参数调优？
    - Claude\DeepSeek，先用这两个吧
4. 钉钉机器人通知
通知内容：需要通知哪些信息？（任务开始、完成、失败、走查结果等）
    - 你自己决定就好
通知频率：是否需要避免重复通知？比如任务执行时间很长的情况
    - 暂不考虑
通知权限：是否需要支持@特定人员？
    - 可以设置@人员
5. 错误处理和重试机制
重试策略：任务失败后是否需要自动重试？重试次数和间隔如何设置？
    - 可以配置重试次数，连续失败后就停止。重试间隔需要越来越长
部分失败处理：如果编码任务部分成功（比如生成了代码但提交失败），如何处理？
    - 重试，如果多次提交失败，就放弃提交，把代码改动保留到本地
6. 日志和审计
日志级别：需要记录哪些级别的日志？（DEBUG、INFO、WARN、ERROR）
    - info
日志保留：日志文件需要保留多长时间？
    - 30天吧
敏感信息：AI API密钥等敏感信息在日志中如何处理？
    - 脱敏处理

## 补充需求背景-3
1. 状态文件机制
状态文件位置：状态文件是放在项目根目录，还是放在系统工作目录？
    - 放在系统工作目录吧
状态文件格式：使用JSON还是其他格式？包含哪些状态值？（如：coding, reviewing, completed等）
    - json吧，包含哪些值你自己定
2. 任务优先级和并发
任务并发：是否支持多个任务同时执行？还是串行执行？
    - 支持并发
任务优先级：是否需要支持任务优先级设置？
    - 支持优先级
3. 系统部署
运行方式：是作为Windows服务运行，还是手动启动的脚本？
    - 手动脚本就行
依赖管理：是否需要考虑Python环境、Git客户端等依赖的自动安装？
    - 暂不考虑
4. 监控和调试
任务状态查看：是否需要提供命令行工具查看当前任务执行状态？
    - 需要提供
手动干预：是否需要支持手动触发任务或中断正在执行的任务？
    - 需要提供

## 补充需求背景-4
走查类任务是否只用于审查编码任务的输出？
    - 不是
还是说走查类任务也可以独立存在，用于审查其他分支的代码？
    - 可以独立存在，审查指定分支的代码

## 补充需求背景-5
1. 再增加一种内置的任务类型：需求评审，目标是审查需求文档，并结合当前的代码实现，指出需求文档中不合理的地方，把审查意见输出到markdown文件中
2. 再增加一种内置的任务类型：自定义，目标是兼容任意场景的任务，再配置文件中，指定好任务目标、任务产出。
3. 结合之前提到的三种任务类型，一共需要支持五种任务类型

## 补充需求背景-6
1. 需求评审任务的执行时机
这个任务是在什么时候触发？是定期执行，还是基于某些事件触发？
    - 由配置文件指定
如何获取"当前代码实现"？是指定分支的最新代码，还是某个特定版本的代码？
    - 可以在配置文件中指定项目目录、分支、要参考的代码包路径
2. 需求评审任务的输入来源
需求文档的来源是什么？是文件路径、URL，还是其他方式？
    - 我会把word或者markdown形式的文档以本地文件形式放在工作目录，配置文件中指定本地目录即可
代码实现的范围如何确定？是整个项目，还是特定的模块？
    - 配置文件中可以指定多个类路径或者包路径
3. 自定义任务的灵活性
自定义任务是否也需要支持AI调用？还是纯粹的自定义逻辑？
    - 需要支持AI调用
任务产出是否也需要支持多种格式（如Markdown、JSON、CSV等）？
    - 一般就是Markdown，也可能是excel，或者PPT
4. 任务类型的优先级和调度
这5种任务类型是否都支持相同的调度方式（crontab表达式）？
    - 是的，调度方式一致
是否需要为不同类型的任务设置不同的默认参数？
    - 暂不考虑吧
5. 需求评审任务的AI模型选择
需求评审任务是否也需要支持AI模型选择？还是固定使用某个模型？
    - 支持选择吧
是否需要特殊的提示词模板来指导AI进行需求评审？
    - 可以在配置文件中指定

## 补充需求背景-7
1. 需求评审任务的代码分析深度
是否需要分析代码的架构设计、接口定义、数据模型等？
    - 需要
还是主要关注功能实现与需求的一致性？
    - 也需要分析
2. 自定义任务的AI调用方式
自定义任务是否也需要像其他任务一样支持模型选择和参数配置？
    - 需要支持
是否需要提供一些预设的自定义任务模板？
    - 暂不考虑，后期再慢慢完善
3. 任务间的依赖关系
除了编码任务和走查任务的协作关系，其他任务类型之间是否也需要支持依赖关系？
    - 暂时没有
比如需求评审任务完成后，是否可能触发编码任务？
    - 不同的任务之间互不干扰
4. 输出文件的命名和组织
不同任务类型的输出文件是否需要统一的命名规范？
    - 需要统一命名规范
是否需要支持输出文件的版本管理和归档？
    - 暂不考虑

## 补充需求背景-8
编码规范文件：您希望如何配置和管理编码规范？
    - 配置文件中指定编码规范文件的路径，编码规范文件是md文件
任务超时时间：每种任务类型的合理超时时间是多少？
    - 你自己决定
AI参数调优：除了基础参数，是否需要支持更多高级参数？
    - 你自己决定
状态文件管理：是否需要定期清理和归档机制？
    - 你自己决定
通知模板：您希望通知内容包含哪些具体信息？
    - 你自己决定

## 补充需求背景-9
1. 编码规范文件的组织方式
是否需要按语言类型分类（Java、Python、前端等）？
还是使用一个统一的编码规范文件？
    - 根据不同的语言分类
2. 状态文件清理的时机
每天凌晨2点清理是否合适？
还是希望在其他时间点？
    - 凌晨2点清理
3. 通知模板的个性化
是否需要支持不同任务类型使用不同的通知模板？
还是使用统一的模板？
    - 你自己决定

请阅读以上文档，对于需求如果过还有疑问，一定和我交流，我会完善需求文档。需求没有明确前，不要开始编码