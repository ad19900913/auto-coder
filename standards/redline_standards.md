---
title: "编码红线规范 v1.0"
version: "1.0"
last_updated: "2025-01-20"
language: "all"
framework: "cross-platform"
alwaysApply: true
---
# AI Developer Profile  

ai_persona:  
  role: Senior Java Developer  
  principles:  
    - SOLID  
    - DRY  
    - KISS  
    - YAGNI  
    - OWASP  
    - DOP  
    - FP  
    - DDD
# Technical Stack
tech_stacks
  framework: Spring Boot
  build_tool: Maven
  java_version: 8
  dependencies:
    - Commons Lang3
    - JUnit5
  language: Chinese 
  code_comments: Chinese

## 🚨 编码红线 - 绝对禁止

### 云平台开发红线

1.【红线】文件上传需要限定上传文件大小、数量，文件类型根据实际情况定:
2.【红线】禁止直接使用不可信数据来拼接 SQL语句: 1)【红线】禁止在所有的外部输入使 用，例如: 接口、用户输入;
3.【红线】禁止硬编码秘钥、密码、用户口令，详细参照《Java 语言安全编程规范》规则 3.1;
4.【红线】禁止非安全的 Htttp 请求中传输明文秘钥、密码、口令信息，应使用安全的 Htttps方式详细 参照《Java 语言安全编程规范》规则 3.4;
5.【红线】禁止使用可能泄露秘钥、加密信息的前端加密算法详细参照《Java 语言安全编程规范》规则 3.5;
6.【红线】禁止代码中存在明文秘钥、密码、口令，详细参照《Java 语言安全编程规范》规 则3.7:
7.【红线】禁止弱密码、弱口令，详细参照《Java 语言安全编程规范》规则 3.8;
8.【红线】禁止使用私有或者弱加密算法，详细参照《Java 语言安全编程规范》规则 4.1;
9.【红线】禁止在日志中打印明文的一级敏感信息如秘钥、密码、token 信息，详细参照《Java语言安全 编程规范》规则 5.5;
10.【红线】管理型操作类型的非 Get请求需记录操作日志，详细参照《Java 语言安全编程规范》规则5.6
11.【红线】禁止安装非必要测试服务，详细参照《JAVA语言安全编程规范》规则 9.10:
12.【红线】禁止开启非必要的端口，详细参照《安全编程规范》规则 9.11;
13.【红线】禁止开启全局监听端口，详细参照《Java 语言全编程规范》规则 9.12;
14.【红线】禁止不关闭资源，例如文件、网络、对象:
15.【红线】禁止私自引入第三方组件，使用三方库必须通过系统组评审:
16.【红线】接口返回前端的超大 Long 类型，诸如雪花 ID等，必须使用 String 类型返回，否则会 出 现精度丢失;
17.【红线】代码和注释中都要避免使用任何语言的种族歧视性词语;
18.【红线】生产环境，禁止默认开启  debug 日志;如遇线上问题排査，可以临时开启，但必须及时关闭:
19.【红线】禁止出现接口文档与实现不一致，如有变动，需先修改接口文档并评审通过后，再修改实现， 接口文档必须有修订记录;

### JAVA编码红线

1.【红线】IDE 的 text file encoding 设置为 UTF-8;IDE 中文件的换行符使用 Unix 格式，不要使用  Windows 格式;
2.【红线】定义数据对象 D0 类时，属性类型必须和数据库字段类型相匹配:
3.【红线】时间戳字段类型定义，必须是 Long 类型，避免溢出;
4.【红线】在使用 java.util.stream. Collectors 类的 toMap()方法转为 Map 集合时,一定要使 用含有参数类型为 BinaryOperator，参数名为 mergeFunction 的方法，否则当出现相同 key 值时会抛
出IllegalStateException 异常:
5.【红线】在使用 java.uti1.stream. Collectors 类的 toMap()方法转为 Map 集合时,一定要注 意当 value 为nu11 时会抛 NPE 异常;
6.【红线】线程资源必须通过线程池提供，不允许在应用中自行显式创建线程:
7.【红线】ThreadLoca1 变量，必须显式回收，否则会影响业务逻辑和出现内存泄漏:
8.【红线】Thread#run 方法死循环逻辑中，catch 捕获异常必须是 throwAble，不能仅捕获InterruptedException，避免其他异常导致工作线程退出:
9.【红线】禁止用 Beanuti1s 进行属性的 copy，性能差，并且问题难以排査，推荐使用 get/set 方法;
10.【红线】生产环境禁止直接使用 System.out 或 System.err 输出日志或使用 e.printStackTrace()打印异常堆栈:
11.【红线】单元测试代码必须写在如下工程目录:src/test/，不允许写在业务代码目录下，禁止测试代码上生产;

## 🔍 红线检查清单

### 代码提交前检查
- [ ] 没有硬编码的敏感信息
- [ ] 没有SQL注入风险
- [ ] 没有XSS攻击风险
- [ ] 没有命令注入风险
- [ ] 没有N+1查询问题
- [ ] 没有无限循环风险
- [ ] 没有内存泄漏风险
- [ ] 没有魔法数字
- [ ] 嵌套层级不超过3层
- [ ] 异常处理完整
- [ ] 没有竞态条件
- [ ] 没有死锁风险
- [ ] 没有吞掉异常
- [ ] 没有忽略返回值
- [ ] 没有记录敏感信息
- [ ] 没有print调试语句
- [ ] 没有硬编码配置
- [ ] 没有环境相关配置

### 代码审查要点
- 重点关注安全相关的代码
- 检查异常处理是否完整
- 验证并发安全性
- 确认配置管理正确
- 检查日志记录规范

## 📚 红线规范执行

### 自动化检查
- 使用ESLint、Pylint等静态分析工具
- 配置安全扫描工具
- 实施自动化测试覆盖
- 使用代码质量门禁

### 人工审查
- 强制代码审查流程
- 重点关注红线区域
- 定期进行安全培训
- 建立红线违规报告机制

### 违规处理
- 立即停止违规代码合并
- 要求开发者修复问题
- 记录违规情况
- 提供修复指导

## 🎯 红线规范目标

通过严格执行这些红线规范，我们致力于：
- 确保代码安全性
- 提高系统性能
- 保证代码质量
- 减少生产事故
- 提升开发效率
- 建立良好的编码习惯

记住：**红线就是底线，绝对不能触碰！**
